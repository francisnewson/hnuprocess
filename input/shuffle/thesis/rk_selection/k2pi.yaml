scaling:
    - scaling_method:
        strategy: m2
        name: mc_pos

        halo_channels:
            - p6.data.kless.q11t.v2.pos
            - p6.data.km.q11t.v2.pos

        data_channels:
            - p5.data.q1.v2.pos

        km2_channels:
            - p5.km2.v2.pos

        halo:
            strategy: m2
            input_file: tdata/rk_selection/all.rk_selection.root
            plot_path: km2_rk_full/h_m2m_kmu

            min_mass: -0.3
            max_mass: -0.075

        km2:
            strategy: m2
            input_file: tdata/rk_selection/all.rk_selection.root
            plot_path: km2_rk_full/h_m2m_kmu

            min_mass: -0.03
            max_mass:  0.00

    - scaling_method:
        strategy: m2
        name: mc_neg

        halo_channels:
            - p6.data.km.q11t.v2.neg

        data_channels:
            - p5.data.q1.v2.neg

        km2_channels:
            - p5.km2.v2.neg

        halo:
            strategy: m2
            input_file: tdata/rk_selection/all.rk_selection.root
            plot_path: km2_rk_full/h_m2m_kmu

            min_mass: -0.3
            max_mass: -0.075

        km2:
            strategy: m2
            input_file: tdata/rk_selection/all.rk_selection.root
            plot_path: km2_rk_full/h_m2m_kmu

            min_mass: -0.03
            max_mass:  0.00

weights:
    fid_file: use_root
    root_file: "tdata/rk_selection/all.rk_selection.root"
    pre : ""
    post: "sample_burst_count/bursts"
    branch:  "weight"

mass_windows:
    method: params
    x0: 0.390
    res0: 0.0035
    offset: 0

output:
    input_file: tdata/rk_selection/all.rk_selection.root
    plots:
        - path: k2pi_problem_clusters/h_n_bad
          name: n_bad_clus_k2pi_low
          rebin: 1

        - path: k2pi_problem_clusters/h_E_all
          name: all_clus_E_k2pi_low
          rebin: 1

        - path: k2pi_problem_clusters/h_ds_bad
          name: bad_clus_ds_k2pi_low
          rebin: 1

        - path: k2pi_problem_clusters/h_E_bad
          name: bad_clus_E_k2pi_low
          rebin: 1

        - path: k2pi_selection_st_low/h_p
          name: hp_prob_st
          rebin: 1

        - path: km2_rk_full_k2pi_low/h_p
          name: hp_prob_full
          rebin: 1

        - path: km2_rk_loose_lkr_k2pi_low/h_p
          name: hp_prob_loose_lkr
          rebin: 1

        - path: km2_rk_full/h_m2m_kmu
          name:  rk_m2m
          rebin: 5

        - path: km2_rk_full/h_z
          name:  rk_z
          rebin: 1

        - path: km2_rk_full/h_p_z
          name:  rk_pz
          rebin: 1

        - path: k2pi_selection_st_high/h_p_z
          name:  st_high_pz
          rebin: 2

        - path: k2pi_selection_rk_high/h_z
          name:  rk_high_z
          rebin: 1

        - path: k2pi_selection_st_high/h_z
          name:  st_high_z
          rebin: 1

        - path: k2pi_selection_st_high/h_p
          name:  st_high_p
          rebin: 1

        - path: km2_rk_single_track/h_m2m_kmu
          name:  rk_m2m_st
          rebin: 5

        - path: km2_rk_single_track/h_m2_z
          name:  rk_st_m2_z
          rebin: 2

        - path: km2_rk_loose_lkr/h_m2m_kmu
          name:  rk_m2m_loose
          rebin: 5

        - path: k2pi_selection_st_low_clusters/h_gt_bad
          name: low_k2pi_bad_clusters_gt_bad
          rebin: 1

        - path: k2pi_selection_st_low_clusters/h_gt_ass
          name: low_k2pi_bad_clusters_gt_ass
          rebin: 1

        - path: k2pi_selection_st_high_clusters/h_ds_not_ass
          name: high_k2pi_bad_clusters_ds_not_ass
          rebin: 1

        - path: k2pi_selection_st_high_clusters/h_E_not_ass
          name: high_k2pi_bad_clusters_E_not_ass
          rebin: 1

        - path: k2pi_selection_st_high_clusters/h_ds_all
          name: high_k2pi_bad_clusters_ds_all
          rebin: 1

        - path: k2pi_selection_st_high_clusters/h_E_all
          name: high_k2pi_bad_clusters_E_all
          rebin: 1

        - path: k2pi_selection_st_high_clusters/h_ds_bad
          name: high_k2pi_bad_clusters_ds_bad
          rebin: 1

        - path: k2pi_selection_st_high_clusters/h_E_bad
          name: high_k2pi_bad_clusters_E_bad
          rebin: 1

        - path: k2pi_selection_st_high_clusters/h_n_bad
          name: high_k2pi_bad_clusters_n_bad
          rebin: 1

        - path: k2pi_selection_st_low_clusters/h_gt_all
          name: low_k2pi_st_gt_bad
          rebin: 1

        - path: k2pi_problem_clusters/h_ds_bad
          name: k2pi_problem_ds_bad
          rebin: 1

        - path: k2pi_problem_clusters/h_E_bad
          name: k2pi_problem_E_bad
          rebin: 1

        - path: k2pi_selection_st_high/h_p
          name: k2pi_high_st_p
          rebin: 1

        - path: k2pi_selection_rk_high/h_p
          name: k2pi_high_rk_p
          rebin: 1

        - path: k2pi_selection_rk_loose_lkr_high/h_p
          name: k2pi_high_loose_lkr_rk_p
          rebin: 1

        - path: km2_rk_lkr/E_10_r20/h_mini_m2m_kmu
          name: rk_r20
          rebin: 5

        - path: km2_rk_lkr/E_10_r30/h_mini_m2m_kmu
          name: rk_r30
          rebin: 5

        - path: km2_rk_lkr/E_10_r40/h_mini_m2m_kmu
          name: rk_r40
          rebin: 5

        - path: km2_rk_lkr/E_10_r50/h_mini_m2m_kmu
          name: rk_r50
          rebin: 5


    data_plot:
        channels:
            - p5.data.q1.v2.pos
            - p5.data.q1.v2.neg
        do_blind: false
        min_blind: 0.09
        max_blind: 0.3

    stack:
        - item:
            name: km3_pos
            scaling: mc_pos
            type: km3
            fid_weight: p5.km3.v2.pos
            channels:
                - p5.km3.v2.pos

        - item:
            name: km3_neg
            scaling: mc_neg
            type: km3
            fid_weight: p5.km3.v2.neg
            channels:
                - p5.km3.v2.neg

        - item:
            name: ke3_pos
            scaling: mc_pos
            type: ke3
            fid_weight: p5.ke3.v2.pos
            channels:
                - p5.ke3.v2.pos

        - item:
            name: ke3_neg
            scaling: mc_neg
            type: ke3
            fid_weight: p5.ke3.v2.neg
            channels:
                - p5.ke3.v2.neg


        - item:
            name: k3pi_pos
            scaling: mc_pos
            fid_weight: p5.k3pi.v2.pos
            type: k3pi
            channels:
                - p5.k3pi.v2.pos

        - item:
            name: k3pi_neg
            scaling: mc_neg
            fid_weight: p5.k3pi.v2.neg
            type: k3pi
            channels:
                - p5.k3pi.v2.neg

        - item:
            name: k3pi0_pos
            scaling: mc_pos
            fid_weight: p5.k3pi0.v2.pos
            type: k3pi0
            channels:
                - p5.k3pi0.v2.pos

        - item:
            name: k3pi0_neg
            scaling: mc_neg
            fid_weight: p5.k3pi0.v2.neg
            type: k3pi0
            channels:
                - p5.k3pi0.v2.neg

        - item:
            name: k2pig_pos
            scaling: mc_pos
            type: k2pi
            fid_weight: p5.k2pig.v2.pos
            channels:
                - p5.k2pig.v2.pos

        - item:
            name: k2pig_neg
            scaling: mc_neg
            type: k2pi
            fid_weight: p5.k2pig.v2.neg
            channels:
                - p5.k2pig.v2.neg

        - item:
            name: halo_pos
            scaling: mc_pos
            type: halo
            errors:
                - halo_scale
            channels:
                - p6.data.kless.q11t.v2.pos
                - p6.data.km.q11t.v2.pos

        - item:
            name: halo_neg
            scaling: mc_neg
            type: halo
            errors:
                - halo_scale
            channels:
                - p6.data.km.q11t.v2.neg

        - item:
            name: km2_pos
            scaling: mc_pos
            fid_weight: p5.km2.v2.pos
            type: km2
            channels:
                - p5.km2.v2.pos

        - item:
            name: km2_neg
            scaling: mc_neg
            fid_weight: p5.km2.v2.neg
            type: km2
            channels:
                - p5.km2.v2.neg
